# âš™ï¸ Cloudflare Pages æ­£ç¡®é…ç½®æŒ‡å—

## ğŸ¯ å¿…éœ€çš„é…ç½®ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰

åœ¨ Cloudflare Pages æ§åˆ¶å°é…ç½®æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹å‡†ç¡®çš„è®¾ç½®ï¼š

---

## ğŸ“‹ Framework preset

```
é€‰æ‹©: None
æˆ–: Vite
```

**è¯´æ˜**: è¿™ä¸¤ä¸ªé€‰é¡¹éƒ½å¯ä»¥ï¼ŒCloudflare ä¼šè‡ªåŠ¨æ£€æµ‹

---

## ğŸ”¨ Build command

```
npm run build
```

âš ï¸ **é‡è¦**: å¿…é¡»å®Œå…¨ä¸€è‡´ï¼Œä¸èƒ½æœ‰ç©ºæ ¼æˆ–å…¶ä»–å­—ç¬¦

---

## ğŸ“‚ Build output directory

```
dist
```

âš ï¸ **æœ€é‡è¦**: è¿™æ˜¯æœ€å¸¸è§çš„é”™è¯¯ç‚¹ï¼

**å¸¸è§é”™è¯¯**:
- âŒ ç•™ç©º
- âŒ `./dist`
- âŒ `/dist`
- âŒ `build`
- âœ… æ­£ç¡®: `dist`

---

## ğŸ“ Root directory (path to project)

```
ç•™ç©º
æˆ–: /
```

**è¯´æ˜**: å¦‚æœæ‚¨çš„é¡¹ç›®åœ¨ä»“åº“æ ¹ç›®å½•ï¼Œç•™ç©ºå³å¯

---

## ğŸ”§ Environment variables (å¯é€‰ä½†æ¨è)

æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | å€¼ |
|--------|-----|
| `NODE_VERSION` | `22.16.0` |
| `NODE_OPTIONS` | `--max-old-space-size=4096` (å¦‚æœæ„å»ºå†…å­˜ä¸è¶³) |

**å¦‚ä½•æ·»åŠ **:
1. Settings â†’ Environment variables
2. ç‚¹å‡» **Add variable**
3. è¾“å…¥å˜é‡åå’Œå€¼
4. ç‚¹å‡» **Save**

---

## ğŸŒ² Production branch

```
main
æˆ–: master
```

**è¯´æ˜**: æ ¹æ®æ‚¨çš„ Git ä»“åº“ä¸»åˆ†æ”¯åç§°é€‰æ‹©

---

## ğŸ“¸ å®Œæ•´é…ç½®æˆªå›¾å‚è€ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Set up builds and deployments                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Framework preset                                    â”‚
â”‚ [None â–¼]                                            â”‚
â”‚                                                     â”‚
â”‚ Build command                                       â”‚
â”‚ npm run build                                       â”‚
â”‚                                                     â”‚
â”‚ Build output directory                              â”‚
â”‚ dist                                                â”‚
â”‚                                                     â”‚
â”‚ Root directory (path to project)                   â”‚
â”‚ [ç•™ç©º]                                              â”‚
â”‚                                                     â”‚
â”‚ [Environment variables (advanced)] â–¼                â”‚
â”‚                                                     â”‚
â”‚                [Save and Deploy]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ éƒ¨ç½²åæ£€æŸ¥

### 1. éªŒè¯éƒ¨ç½²çŠ¶æ€

è®¿é—®: Cloudflare Dashboard â†’ Pages â†’ æ‚¨çš„é¡¹ç›®

åº”è¯¥çœ‹åˆ°:
```
Latest deployment
âœ… Production: main@abc1234
   Deployed X minutes ago
   Visit site â†’
```

### 2. æ£€æŸ¥æ„å»ºæ—¥å¿—

ç‚¹å‡»éƒ¨ç½² â†’ View build log

æˆåŠŸçš„æ—¥å¿—åº”è¯¥åŒ…å«:
```
âœ“ 2031 modules transformed.
dist/index.html                    XX.XX kB â”‚ gzip: XX.XX kB
dist/assets/main-xxxx.js           XX.XX kB â”‚ gzip: XX.XX kB
âœ“ built in XX.XXs
Success: Build command completed
```

### 3. è®¿é—®ç½‘ç«™

ç‚¹å‡» **Visit site** æˆ–è®¿é—®æ‚¨çš„ Pages URL

åº”è¯¥çœ‹åˆ°:
- âœ… é¦–é¡µæ­£å¸¸æ˜¾ç¤º
- âœ… æ ·å¼æ­£ç¡®åŠ è½½
- âœ… å›¾ç‰‡æ­£å¸¸æ˜¾ç¤º
- âœ… è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸

---

## ğŸ› å¦‚æœä»ç„¶æ˜¾ç¤º "There is nothing here yet"

### æ­¥éª¤ 1: æ£€æŸ¥ Build output directory

1. Settings â†’ Builds & deployments
2. æ‰¾åˆ° **Build output directory**
3. ç¡®è®¤æ˜¯: `dist`
4. å¦‚æœä¸æ˜¯ï¼Œä¿®æ”¹å¹¶ä¿å­˜

### æ­¥éª¤ 2: è§¦å‘é‡æ–°éƒ¨ç½²

**æ–¹æ³• A**: é€šè¿‡ Dashboard
1. Deployments é¡µé¢
2. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²
3. ç‚¹å‡» **Retry deployment** æŒ‰é’®

**æ–¹æ³• B**: æ¨é€æ–°æäº¤
```bash
git commit --allow-empty -m "Trigger rebuild"
git push
```

### æ­¥éª¤ 3: ç­‰å¾…éƒ¨ç½²å®Œæˆ

- é€šå¸¸éœ€è¦ 1-2 åˆ†é’Ÿ
- åˆ·æ–° Deployments é¡µé¢æŸ¥çœ‹çŠ¶æ€
- ç­‰å¾…æ˜¾ç¤ºç»¿è‰² âœ… Success

### æ­¥éª¤ 4: æ¸…é™¤ç¼“å­˜å¹¶è®¿é—®

```bash
# æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
Ctrl + Shift + Delete (Windows)
Cmd + Shift + Delete (Mac)

# ç¡¬åˆ·æ–°é¡µé¢
Ctrl + Shift + R (Windows)
Cmd + Shift + R (Mac)
```

---

## ğŸ“Š é…ç½®å¯¹æ¯”

### âŒ é”™è¯¯é…ç½®ç¤ºä¾‹

```
Build command: npm build          âŒ ç¼ºå°‘ "run"
Build output directory: ./dist    âŒ ä¸éœ€è¦ "./"
Root directory: /dist             âŒ é”™è¯¯çš„è·¯å¾„
```

### âœ… æ­£ç¡®é…ç½®ç¤ºä¾‹

```
Build command: npm run build      âœ…
Build output directory: dist      âœ…
Root directory: [ç•™ç©º]            âœ…
```

---

## ğŸ” å¸¸è§é—®é¢˜è§£ç­”

### Q1: ä¸ºä»€ä¹ˆ Build output directory ä¸èƒ½æ˜¯ `./dist`ï¼Ÿ

**A**: Cloudflare Pages æœŸæœ›ç›¸å¯¹è·¯å¾„ä¸å¸¦ `./` å‰ç¼€ï¼Œç›´æ¥ä½¿ç”¨ `dist`ã€‚

### Q2: å¦‚æœæˆ‘çš„é¡¹ç›®åœ¨å­ç›®å½•æ€ä¹ˆåŠï¼Ÿ

**A**: 
- å¦‚æœé¡¹ç›®åœ¨ `frontend/` ç›®å½•
- Root directory è®¾ç½®ä¸º: `frontend`
- Build output directory ä»ç„¶æ˜¯: `dist`

### Q3: éƒ¨ç½²æˆåŠŸä½†ç½‘ç«™ç©ºç™½ï¼Ÿ

**A**: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°:
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. æŸ¥çœ‹ Console å’Œ Network æ ‡ç­¾
3. æ‰¾åˆ° 404 æˆ–é”™è¯¯ä¿¡æ¯
4. é€šå¸¸æ˜¯èµ„æºè·¯å¾„é—®é¢˜

### Q4: æ¯æ¬¡æ¨é€ä»£ç éƒ½ä¼šè‡ªåŠ¨éƒ¨ç½²å—ï¼Ÿ

**A**: æ˜¯çš„ï¼Œå¦‚æœæ‚¨é€šè¿‡ Git è¿æ¥:
- æ¨é€åˆ°ç”Ÿäº§åˆ†æ”¯ï¼ˆå¦‚ `main`ï¼‰ä¼šè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- æ¨é€åˆ°å…¶ä»–åˆ†æ”¯ä¼šåˆ›å»ºé¢„è§ˆéƒ¨ç½²

---

## ğŸ¯ å¿«é€Ÿè¯Šæ–­å‘½ä»¤

åœ¨æœ¬åœ°è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯æ„å»ºï¼š

```bash
# 1. æ£€æŸ¥å½“å‰é…ç½®
npm run cloudflare:check

# 2. æœ¬åœ°æ„å»ºæµ‹è¯•
npm run build

# 3. æ£€æŸ¥è¾“å‡ºæ–‡ä»¶
ls -la dist/          # Mac/Linux
dir dist\             # Windows

# 4. æœ¬åœ°é¢„è§ˆ
npm run preview
# è®¿é—® http://localhost:4173
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœæŒ‰ç…§æ­¤æŒ‡å—é…ç½®åä»æœ‰é—®é¢˜ï¼Œè¯·æä¾›ï¼š

1. **Cloudflare Pages è®¾ç½®æˆªå›¾**
   - Settings â†’ Builds & deployments

2. **æœ€æ–°éƒ¨ç½²æ—¥å¿—**
   - Deployments â†’ ç‚¹å‡»æœ€æ–°éƒ¨ç½² â†’ å¤åˆ¶ Build log

3. **æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯**
   - F12 â†’ Console æ ‡ç­¾ â†’ æˆªå›¾æˆ–å¤åˆ¶é”™è¯¯

4. **æœ¬åœ°æ„å»ºç»“æœ**
   - è¿è¡Œ `npm run build` çš„å®Œæ•´è¾“å‡º

---

## âœ… æˆåŠŸæ ‡å¿—

å½“é…ç½®æ­£ç¡®æ—¶ï¼š

1. âœ… éƒ¨ç½²çŠ¶æ€æ˜¾ç¤ºç»¿è‰² Success
2. âœ… è®¿é—®ç½‘ç«™ URL æ˜¾ç¤ºæ‚¨çš„åº”ç”¨
3. âœ… æµè§ˆå™¨æ§åˆ¶å°æ—  404 é”™è¯¯
4. âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

**æ›´æ–°æ—¥æœŸ**: 2025-12-07
**é€‚ç”¨ç‰ˆæœ¬**: PDFToolkit v1.10.5
**å…³é”®é…ç½®**: `dist` (ä¸å¸¦å‰ç¼€)

